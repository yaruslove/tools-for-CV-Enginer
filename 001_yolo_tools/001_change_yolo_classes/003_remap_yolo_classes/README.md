# YOLO Class Remapper

Инструмент для переназначения идентификаторов классов в аннотациях YOLO формата (.txt файлы) с использованием конфигурации YAML.

## Описание

YOLO Class Remapper позволяет быстро и надежно изменить идентификаторы классов в файлах разметки YOLO. Это особенно полезно при:
- Объединении датасетов с разными схемами классов
- Переиспользовании разметок для обучения моделей с другой структурой классов
- Переходе между разными версиями классификации объектов

## Особенности

- Поддержка гибких схем ремапинга через YAML конфигурацию
- Пакетная обработка всех файлов аннотаций в директории
- Строгие проверки целостности данных через assertions
- Сохранение формата YOLO в обработанных файлах

## Требования

- Python 3.6+
- PyYAML

## Установка

```bash
# Установка зависимостей
pip install pyyaml

# Клонирование репозитория
git clone https://github.com/yourusername/yolo-class-remapper.git
cd yolo-class-remapper
```

## Использование

```bash
python yolo_remapper.py <путь_к_yaml_конфигу> <директория_с_аннотациями>
```

### Пример

```bash
python yolo_remapper.py config.yaml ./dataset/labels/
```

## Формат конфигурационного файла

Конфигурационный файл YAML должен содержать два обязательных поля:

1. `was` - список старых классов, где индекс в списке соответствует id класса
2. `remap` - словарь новых классов, где ключ - новое имя класса, значение - старое имя класса

### Пример конфигурационного файла

```yaml
was:
  - "background_top"  # class_id = 0
  - "target_top"      # class_id = 1

remap:
  00_target_top: target_top        # Новый class_id = 0
  01_background_top: background_top  # Новый class_id = 1
  02_strip: none                    # Игнорировать
  03_coil: none                     # Игнорировать
  04_loose_strip: none              # Игнорировать
```

В этом примере:
- Объекты класса 1 ("target_top") будут заменены на класс 0
- Объекты класса 0 ("background_top") будут заменены на класс 1
- Значение "none" означает, что старый класс с таким именем не существует или не нужно переназначать

## Формат файлов аннотаций YOLO

YOLO аннотации представляют собой текстовые файлы со строками в формате:
```
<class_id> <x_center> <y_center> <width> <height>
```

Где:
- `class_id` - целочисленный идентификатор класса (который будет заменен согласно конфигу)
- `x_center`, `y_center` - координаты центра ограничивающего прямоугольника (относительные значения 0-1)
- `width`, `height` - ширина и высота прямоугольника (относительные значения 0-1)

## Примечания

- Скрипт не создает резервные копии файлов аннотаций. Рекомендуется сделать бэкап перед обработкой.
- Для диагностики скрипт использует assertions вместо обработки исключений.
- При ошибке формата выводится информативное сообщение и обработка прерывается.
