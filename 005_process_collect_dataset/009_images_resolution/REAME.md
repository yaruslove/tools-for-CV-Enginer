# Image Stats Counter

Утилита для подсчета количества изображений и расчета их средних размеров по классам в указанной директории. Результаты экспортируются в CSV файл и отображаются в терминале.

## Структура проекта

```
image-stats-counter/
│
├── src/                          # Исходный код
│   └── image_stats_counter.py    # Основной скрипт
│
├── config/                       # Конфигурационные файлы
│   └── config.yaml               # Конфигурация с параметрами
│
├── data/                         # Директория с данными (пример)
│   ├── cats/                     # Класс "кошки"
│   │   ├── cat1.jpg
│   │   ├── cat2.png
│   │   └── ...
│   │
│   ├── dogs/                     # Класс "собаки"
│   │   ├── dog1.jpg
│   │   ├── dog2.png
│   │   └── ...
│   │
│   └── birds/                    # Класс "птицы"
│       ├── bird1.jpg
│       ├── bird2.png
│       └── ...
│
├── output/                       # Выходные файлы
│   └── class_stats.csv           # Результаты подсчета
│
├── requirements.txt              # Зависимости проекта
├── README.md                     # Документация проекта
└── .gitignore                    # Игнорируемые Git файлы
```

## Описание

Этот инструмент анализирует директории с изображениями, где название каждой директории соответствует определенному классу. Скрипт:
1. Подсчитывает количество изображений в каждой директории
2. Вычисляет средний размер (ширину x высоту) изображений для каждого класса
3. Рассчитывает средний размер изображений для всего датасета
4. Генерирует отчет в формате CSV
5. Выводит результаты в терминал в виде красиво отформатированной таблицы

## Требования

- Python 3.6+
- PyYAML
- pandas
- numpy
- tabulate
- natsort
- Pillow (PIL)

Установка зависимостей:

```bash
pip install -r requirements.txt
```

## Конфигурация

Настройки приложения задаются в файле `config/config.yaml`:

```yaml
src: ./data            # Путь к директории с классами изображений
dst_csv: ./output/class_stats.csv  # Путь для сохранения результатов
orientation: vertical  # Ориентация таблицы в выводе: vertical или horizontal
```

## Использование

1. Настройте параметры в файле `config/config.yaml`:
   - `src` - путь к директории с классами изображений
   - `dst_csv` - путь для сохранения результатов в CSV
   - `orientation` - ориентация таблицы в выводе (`vertical` или `horizontal`)
2. Запустите скрипт:

```bash
python src/image_stats_counter.py
```

## Результаты

Скрипт создаст CSV файл с тремя колонками:
- `class` - название класса (имя директории)
- `count` - количество изображений в данном классе
- `avg_size` - средний размер изображений в формате "ширинаxвысота"

Также в терминале будет отображена таблица с результатами в выбранной ориентации (вертикальной или горизонтальной).

## Пример вывода

### Вертикальная ориентация
```
Статистика по классам (вертикальное отображение):
╒═══════════╤═══════╤═══════════╕
│ class     │ count │ avg_size  │
╞═══════════╪═══════╪═══════════╡
│ cats      │   120 │ 640x480   │
├───────────┼───────┼───────────┤
│ dogs      │   150 │ 800x600   │
├───────────┼───────┼───────────┤
│ birds     │    90 │ 720x540   │
├───────────┼───────┼───────────┤
│ Total     │   360 │ 720x540   │
╘═══════════╧═══════╧═══════════╛
```

### Горизонтальная ориентация
```
Статистика по классам (горизонтальное отображение):
╒═══════════╤═══════╤═══════╤═══════╤═══════╕
│           │ cats  │ dogs  │ birds │ total │
╞═══════════╪═══════╪═══════╪═══════╪═══════╡
│ count     │   120 │   150 │    90 │   360 │
├───────────┼───────┼───────┼───────┼───────┤
│ avg_size  │ 640x480 │ 800x600 │ 720x540 │ 720x540 │
╘═══════════╧═══════╧═══════╧═══════╧═══════╛
```

## Поддерживаемые форматы изображений

- JPG/JPEG
- PNG
- GIF
- BMP